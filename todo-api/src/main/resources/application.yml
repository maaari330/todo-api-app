---
spring:
  config:
    import:
      - optional:file:../.env[.properties]
  application:
    name: todo-api
  profiles:
    # デフォルトで dev プロファイルを有効にする
    active: dev
  datasource:
    # Dockerのコンテナ内でのMySQL接続URL
    url: jdbc:mysql://db:3306/todo?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC&characterEncoding=utf8
    username: ${SPRING_DATASOURCE_USERNAME}
    password: ${MYSQL_ROOT_PASSWORD}
    driver-class-name: com.mysql.cj.jdbc.Driver
  jpa:
    # Hibernate:エンティティクラス（@Entity）を定義すると、Hibernate がそのクラスとテーブルを対応づけ
    hibernate:
      # テーブルが自動で作成される設定
      ddl-auto: validate
    properties:
      hibernate:
      dialect: org.hibernate.dialect.MySQLDialect
    show-sql: true
  flyway:
    enabled: true
    locations: classpath:db/migration
 
  security:
    user:
      name: ${ACTUATOR_USER}
      password: ${ACTUATOR_PASSWORD}

springdoc:
  api-docs:
    # （必要なら）変更可能
    path: /v3/api-docs
  swagger-ui:
    # UI の起動パス
    path: /swagger-ui.html
    # GET→POST→…の順にソート
    operationsSorter: method

server:
  error:
    # エラーレスポンスに例外メッセージを含める
    include-message: always
    # エラーレスポンスにスタックトレースを含める
    include-stacktrace: always

jwt:
  secretKey: ${JWT_SECRETKEY}
  expiration: ${JWT_EXPIRATION}

logging:
  level:
    '[org.springframework.http.converter.json]': DEBUG
    '[org.springframework.security]': DEBUG
    '[org.springframework.web]': DEBUG
